<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <title>Vizualizacija: Binary Search Tree (BST)</title>
    <style>
        :root { --node-color: #6c5ce7; --highlight: #ff7675; --line: #b2bec3; }
        body { font-family: 'Segoe UI', sans-serif; background: #f8f9fa; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .container { background: white; padding: 2rem; border-radius: 15px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); width: 90%; max-width: 900px; text-align: center; }
        
        #treeCanvas { position: relative; width: 100%; height: 450px; margin-top: 40px; border-bottom: 1px solid #eee; }
        
        .node {
            width: 35px; height: 35px; background: var(--node-color); color: white;
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            font-weight: bold; position: absolute; z-index: 2; transition: all 0.4s ease;
            font-size: 0.8rem; box-shadow: 0 3px 6px rgba(0,0,0,0.1);
        }

        .line { position: absolute; background: var(--line); height: 2px; transform-origin: 0 0; z-index: 1; transition: all 0.4s ease; }

        .controls { margin-top: 25px; display: flex; gap: 10px; justify-content: center; flex-wrap: wrap; }
        input { padding: 10px; border: 2px solid #dfe6e9; border-radius: 6px; width: 80px; font-size: 1rem; }
        button { padding: 10px 18px; cursor: pointer; border: none; border-radius: 6px; font-weight: bold; color: white; background: #00b894; transition: 0.2s; }
        button:hover { opacity: 0.9; transform: translateY(-1px); }
        .btn-search { background: #0984e3; }
        .btn-reset { background: #d63031; }
        
        .found { background: var(--highlight) !important; transform: scale(1.3); box-shadow: 0 0 15px var(--highlight); }
        #status { margin-top: 15px; font-weight: 500; color: #636e72; min-height: 1.2em; }
    </style>
</head>
<body>

    <div class="container">
        <h2>Binary Search Tree (BST)</h2>
        <p>Levo < starš < Desno. Učinkovito iskanje in razvrščanje.</p>

        <div id="treeCanvas"></div>

        <div class="controls">
            <input type="number" id="valInput" placeholder="Število">
            <button onclick="add()">Vstavi (Insert)</button>
            <button class="btn-search" onclick="search()">Išči (Search)</button>
            <button class="btn-reset" onclick="reset()">Ponastavi</button>
        </div>
        <p id="status">Vstavite števila, da zgradite urejeno drevo.</p>
    </div>

    <script>
        class Node {
            constructor(val) {
                this.val = val;
                this.left = null;
                this.right = null;
                this.x = 0; this.y = 0;
            }
        }

        let root = null;
        const canvas = document.getElementById('treeCanvas');
        const status = document.getElementById('status');

        // BST Logika vstavljanja
        function insert(node, val) {
            if (!node) return new Node(val);
            if (val < node.val) node.left = insert(node.left, val);
            else if (val > node.val) node.right = insert(node.right, val);
            return node;
        }

        // Renderiranje s koordinatami
        function draw(node, x, y, step) {
            if (!node) return;

            if (node.left) {
                drawLine(x, y, x - step, y + 70);
                draw(node.left, x - step, y + 70, step / 1.9);
            }
            if (node.right) {
                drawLine(x, y, x + step, y + 70);
                draw(node.right, x + step, y + 70, step / 1.9);
            }

            const div = document.createElement('div');
            div.className = 'node';
            div.id = `node-${node.val}`;
            div.innerText = node.val;
            div.style.left = `${x - 17.5}px`;
            div.style.top = `${y - 17.5}px`;
            canvas.appendChild(div);
        }

        function drawLine(x1, y1, x2, y2) {
            const len = Math.sqrt((x2-x1)**2 + (y2-y1)**2);
            const ang = Math.atan2(y2-y1, x2-x1) * 180 / Math.PI;
            const line = document.createElement('div');
            line.className = 'line';
            line.style.width = `${len}px`;
            line.style.left = `${x1}px`;
            line.style.top = `${y1}px`;
            line.style.transform = `rotate(${ang}deg)`;
            canvas.appendChild(line);
        }

        function add() {
            const v = parseInt(document.getElementById('valInput').value);
            if (isNaN(v)) return;
            root = insert(root, v);
            render();
            status.innerText = `Vstavljeno število ${v}.`;
        }

        function search() {
            const v = parseInt(document.getElementById('valInput').value);
            document.querySelectorAll('.node').forEach(n => n.classList.remove('found'));
            
            let curr = root;
            let path = [];
            while(curr) {
                path.push(curr.val);
                if (v === curr.val) {
                    document.getElementById(`node-${v}`).classList.add('found');
                    status.innerText = `Najdeno! Pot: ${path.join(' -> ')}`;
                    return;
                }
                curr = v < curr.val ? curr.left : curr.right;
            }
            status.innerText = "Vrednosti ni v drevesu.";
        }

        function render() {
            canvas.innerHTML = '';
            if (root) draw(root, canvas.offsetWidth/2, 40, canvas.offsetWidth/4);
        }

        function reset() { root = null; render(); status.innerText = "Drevo počiščeno."; }
        window.onresize = render;
    </script>
</body>
</html>
