<!DOCTYPE html>
<html lang="sl">
<head>
    <meta charset="UTF-8">
    <title>Binary Search: 3 Ways</title>
    <style>
        body { background: #0f172a; color: #f8fafc; font-family: 'Fira Code', monospace; display: flex; flex-direction: column; align-items: center; padding: 2rem; }
        .card { background: #1e293b; padding: 2rem; border-radius: 12px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); width: 100%; max-width: 600px; }
        .array-view { background: #0f172a; padding: 10px; border-radius: 6px; color: #38bdf8; word-break: break-all; margin: 15px 0; border: 1px solid #334155; }
        input { background: #0f172a; border: 1px solid #334155; color: #fbbf24; padding: 10px; border-radius: 4px; width: 80px; font-size: 1.1rem; }
        .result { margin-top: 20px; padding: 15px; border-radius: 6px; background: #064e3b; color: #34d399; display: none; }
        button { background: #38bdf8; color: #0f172a; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; font-weight: bold; margin: 5px; }
        button:hover { background: #7dd3fc; }
        .code-label { font-size: 0.8rem; color: #94a3b8; margin-top: 10px; }
    </style>
</head>
<body>

<div class="card">
    <h2>Binarno Iskanje</h2>
    <div class="code-label">Sortiran seznam (0-99):</div>
    <div class="array-view" id="arrayDisplay"></div>
    
    <label>Išči številko:</label>
    <input type="number" id="targetInput" value="42">
    
    <div style="margin-top: 15px;">
        <button onclick="runSearch('iterative')">Iterativno</button>
        <button onclick="runSearch('recursive')">Rekurzivno</button>
        <button onclick="runSearch('functional')">Funkcijsko</button>
    </div>

    <div id="resultBox" class="result"></div>
</div>

<script>
    // Priprava podatkov
    const data = Array.from({length: 100}, (_, i) => i).sort((a, b) => a - b);
    document.getElementById('arrayDisplay').innerText = `[${data.join(', ')}]`;

    // 1. ITERATIVNI PRISTOP (Zanka while)
    // Najbolj pomnilniško učinkovit (O(1) space)
    function binarySearchIterative(arr, target) {
        let left = 0;
        let right = arr.length - 1;
        while (left <= right) {
            let mid = Math.floor((left + right) / 2);
            if (arr[mid] === target) return mid;
            if (arr[mid] < target) left = mid + 1;
            else right = mid - 1;
        }
        return -1;
    }

    // 2. REKURZIVNI PRISTOP
    // Pregledna koda, a uporablja sklad (stack)
    function binarySearchRecursive(arr, target, left = 0, right = arr.length - 1) {
        if (left > right) return -1;
        let mid = Math.floor((left + right) / 2);
        if (arr[mid] === target) return mid;
        return arr[mid] < target 
            ? binarySearchRecursive(arr, target, mid + 1, right)
            : binarySearchRecursive(arr, target, left, mid - 1);
    }

    // 3. FUNKCIJSKI PRISTOP (ES6+)
    // Uporaba slice-anja in rekurzije brez stranskih učinkov
    // Opomba: Slice v JS ustvari kopijo polja, kar poveča porabo spomina na O(n),
    // zato v produkciji raje uporabljamo indekse kot zgoraj.
    const binarySearchFunctional = (arr, target, offset = 0) => {
        if (arr.length === 0) return -1;
        const mid = Math.floor(arr.length / 2);
        if (arr[mid] === target) return mid + offset;
        return arr[mid] < target
            ? binarySearchFunctional(arr.slice(mid + 1), target, offset + mid + 1)
            : binarySearchFunctional(arr.slice(0, mid), target, offset);
    };

    function runSearch(type) {
        const target = parseInt(document.getElementById('targetInput').value);
        let index = -1;
        const start = performance.now();

        if (type === 'iterative') index = binarySearchIterative(data, target);
        if (type === 'recursive') index = binarySearchRecursive(data, target);
        if (type === 'functional') index = binarySearchFunctional(data, target);

        const end = performance.now();
        const resBox = document.getElementById('resultBox');
        resBox.style.display = 'block';
        resBox.innerHTML = `Način: <b>${type.toUpperCase()}</b><br>` + 
                           `Indeks: <b>${index}</b><br>` +
                           `<small>Čas izvajanja: ${(end - start).toFixed(4)} ms</small>`;
    }
</script>

</body>
</html>
